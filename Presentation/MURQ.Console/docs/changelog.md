# История изменений MURQ.Console

## 0.7.1
### Исправлено
- `perkill` удалял все переменные, в том числе системные, которые не восстанавливались, что приводило к падению при выводе текста (`p`/`pln`).

## 0.7.0
Выбор единственной кнопки по `Enter`.
### Добавлено
- Если кнопка одна, её можно нажать с помощью `Enter` (или символ новой строки в режиме перенаправленного ввода).

## 0.6.0
Выпуск для создания новогодних открыток: цвет текста, кнопок и фона, пауза.
### Добавлено
- Поддержка цвета текста и фона локаций через переменную `style_dos_textcolor`.
- Поддержка цвета текста и фона кнопок через переменную `style_dos_buttoncolor`.
- Поддержка паузы `pause <время в миллисекундах>`. Пауза не прерывается кнопками.
### Изменено
- Начальный цвет кнопок теперь белый на чёрном вместо лазурного на чёрном.
### Исправлено
- При старте сбрасываются цвета.
- При выходе сбрасываются цвета и возвращается курсор.

## 0.5.0
Простые подстановки в `p`/`pln`, `goto`, `rnd`$число$, `perkill`, загрузка файла квеста в разных кодировках.
### Добавлено
- Поддержка простых подстановок в `p`/`pln`: можно вставлять имена переменных (как числа `#переменная$` и как строки `#%переменная$`):
  ```urql
  pln Здравствуй, #%имя$, длина твоя #имя$!
  ```
- Поддержка `goto` (без параметров):
  ```urql
  goto метка
  ```
- Поддержка системной переменной `rnd [число]`:
  ```urql
  pln На кубике выпало #rnd6$.
  ```
- Поддержка `perkill`.
- Добавлен необязательный параметр командной строки `--encoding`|`-enc` `utf8`|`win`|`dos` - указывается за файлом квеста. Например: `--encoding UTF8`.
	- Если кодировк не указана, она определяется автоматически: UTF-кодировки определяются успешно, если они идут с маркером вначале файла (BE/LE BOM), иначе кодировкой считается `Windows-1251`.
- Поддержка вывода строковых переменных в подстановках: `#%переменная$`.
### Исправлено
- Исправлено поведение `current_loc`/`previous_loc`: теперь они меняются только при переходе по кнопке.

## 0.4.1
### Исправлено
- Поддерживается 35 кнопок: от `1` до `9` и от `a` до `z`.
- При прохождении метки-дубля не происходит перепрыгивания на оригинальную метку.

## 0.4.0
Поддержка строковых литералов, системных переменных `current_loc` и `previous_loc` и исправление резалки комментариев.
### Добавлено
- Поддержка строковых литералов в присвоении переменным и выражениях-значениях (число, переменная, строковой литерал).
- Поддержка системных переменных `current_loc` и `previous_loc`.
### Исправлено
- Символ, следующий за `/`, больше не съедается.

## 0.3.0
Назначение целочисленных переменных, их проверки и многострочные комментарии.
### Добавлено
- Поддержка присвоения переменной целого числа (`a=4`).
- Поддержка инструкции `if`-`then` с проверкой числа на значение (`if a=4 then pln Всего хорошего!`).
- Многострочные комментарии вырезаются до загрузки квеста.
- Нажатая кнопка выводится на экран в виде: `> [1] В лес`.
### Исправлено
- Загрузка квеста не падает, если в квесте есть дублирующие метки.
- Однострочные комментарии вырезаются до загрузки квеста.
- При нормальном выходе (по `Ctrl`+`Q`) курсор снова становится видимым.

## 0.2.0
Перенаправление ввода-вывода и перезагрузка квеста.
### Добавлено
- Добавлена поддержка запуска MURQ.Console в режиме перенаправления ввода-ввывода (конвейер).
- Возможность перезагрузки квеста комбинацией `Ctrl`+`R`.
### Исправлено
- Исправлена ошибка, из-за которой приложение вылетало, когда в локации не было текста.

## 0.1.1
### Исправлено
- Исправлена ошибка, из-за которой не очищался экран по команде `cls`.

## 0.1.0
Пилотная версия, позволяет запускать простейшие URQ-игры.
### Добавлено
- Базовая реализация URQL-команд:
	- метки
	- `p`/`pln`
	- `btn`
	- `end`
	- `cls`
	- однострочные комментарии